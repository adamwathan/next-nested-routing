const albums = [
  {
    "id": 1,
    "artist": "Death",
    "title": "Leprosy",
    "artwork_url": "/img/death_leprosy.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 2,
    "artist": "Malevolent Creation",
    "title": "The Ten Commandments",
    "artwork_url": "/img/malevolent-creation_ten-commandments.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 3,
    "artist": "Entombed",
    "title": "Left Hand Path",
    "artwork_url": "/img/entombed_left-hand-path.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 4,
    "artist": "Gorguts",
    "title": "The Erosion of Sanity",
    "artwork_url": "/img/gorguts_erosion-of-sanity.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 5,
    "artist": "Death",
    "title": "Human",
    "artwork_url": "/img/death_human.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 6,
    "artist": "Pestilence",
    "title": "Testimony of the Ancients",
    "artwork_url": "/img/pestilence_testimony-of-the-ancients.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 7,
    "artist": "Suffocation",
    "title": "Breeding the Spawn",
    "artwork_url": "/img/suffocation_breeding-the-spawn.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 8,
    "artist": "Edge of Sanity",
    "title": "The Spectral Sorrows",
    "artwork_url": "/img/edge-of-sanity_spectral-sorrows.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  },
  {
    "id": 9,
    "artist": "Entombed",
    "title": "Clandestine",
    "artwork_url": "/img/entombed_clandestine.jpeg",
    "release_date": "1988-07-12",
    "tracks": [
      {
        "number": 1,
        "title": "Leprosy",
        "length": "6:19"
      },
      {
        "number": 2,
        "title": "Born Dead",
        "length": "3:25"
      },
      {
        "number": 3,
        "title": "Forgotten Past",
        "length": "4:33"
      },
      {
        "number": 4,
        "title": "Left to Die",
        "length": "4:35"
      },
      {
        "number": 5,
        "title": "Pull the Plug",
        "length": "4:25"
      },
      {
        "number": 6,
        "title": "Open Casket",
        "length": "4:53"
      },
      {
        "number": 7,
        "title": "Primitive Ways",
        "length": "4:33"
      },
      {
        "number": 8,
        "title": "Choke on It",
        "length": "5:54"
      }
    ]
  }
]

import knex from 'knex'

const db = knex({
  client: 'pg',
  connection: {
    host: '127.0.0.1',
    user: 'adamwathan',
    password: '',
    database: 'headbangstagram'
  }
})


export default async (req, res) => {
  await db('albums').del()
  await db('albums').insert(albums.map(a => ({ ...a, tracks: JSON.stringify(a.tracks) })))
  res.send('done')
}